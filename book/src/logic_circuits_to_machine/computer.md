# CPU を作る
## ちょっと考察
ふつうの CPU は無限を考えなくていいし、プログラミング言語も別に考えなくていい。
ここでは自然数とかを扱いたいのでもうちょっと工夫する。
まず問題点：
- メモリセルに入るのが有限bitでメモリも有限なら、絶対にチューリング完全にはならない。
- メモリが無限にあったとしても、そこにアクセスできないなら無理
    - 例： pc が自然数で += 1 ができるとしても、
        かなり遠くにあるメモリに入っている値を読みだすための指定ができないといけない
    - relative な指定ができるならいいかもしれないが...
- 1. メモリセルは有限で、命令長を無限にする
    - 可変命令長みたいになっていれば大丈夫という感じ
- 2. メモリセルは無限で、メモリが有限
    - 形式的には扱いやすくても、論理回路で自然数の入るメモリを書くのは大変
 
いっそ論理回路側で頑張った方がいいと思うので、こっちの CPU は書きやすくしたい。
- 扱う対象を自然数 ~= ほとんど 0-fill された無限のビット列にする。
- メモリセルに入れるのは自然数
- メモリは自然数で添え字づけ。
- レジスタは有限個で自然数を入れる
- 命令は最初の n bit で（どのレジスタを操作するかも含めて） opcode みたいにして、 operand は残りのビット列（自然数）にする。
    - 「どのレジスタを使うか」が有限で扱えるので、引数は残りのビット列全部にできる。

データの転送
- loadimm rd imm: rd <- imm
- load rd addr : rd <- M[ addr ]
- store rs addr : M [ addr ] <- rs
- mov rd rs : レジスタ間

算術
- add rd rs: 加算
- sub rd rs: 飽和で減算

条件分岐
- jmpreg rd: pc := rd
- jmprel imm: pc += imm
- jltrel rd rs imm: pc += imm if rd < rd

hdl に落とすのは、自然数の入ったメモリの転送さえクリアできれば大丈夫そう。
これは、n bit のチャンクで扱う？
