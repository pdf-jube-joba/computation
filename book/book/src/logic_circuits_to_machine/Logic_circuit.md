# 論理回路
## ざっくりとして説明と動く見本
オンかオフのみがある信号を考える（ \{0,1\} と思ってよい）。
ゲートと呼ばれる基本要素は、複数の信号を入力に、一つの出力を決定する。
論理回路はこのゲートの入力と出力を組み合わせて信号を伝番させて計算を行う。

## 形式的な定義
論理回路の本を読んでも数学的構造として何かといった議論はあまりないか、あったとしてもチューリング完全にはならないような定式化をしていることが多い（有限なゲートの組み合わせだとダメそう）。
一方で、論理回路の本を読めば数学的構造として定義するなら何を定めればいいかは容易に察せる（と思う）。
ただ、定義しようとするとめんどくさいし間違いは多そう。
ここではその定式化を使うことにする。

論理ゲートのラベルと呼ばれる集合 \(G\) を \(\{\text{AND}, \text{OR}, \text{NOT}\}\) とする。
これは単にラベルのためだけに用意したものなので後々で意味付けがなされる。
また、分岐を行うためのラベルとして \(B = \{\text{BR}\}\) を用意する。
また、入力ラベル \(I\) を \(\{\text{IN}(n) \mid n \in \mathbb{N}\}\) とする。
同様に、出力ラベル \(O\) を \(\{\text{OUT}(n) \mid n \in \mathbb{N}\}\) とする。
ラベルの全体\(L\) は \(G \cup B \cup I \cup O\) とする。

論理回路とは有向グラフ \((V,E)\) と \(f\): \(V \to L\) の組であって次の条件を満たすものとする。
ただし、 \(v \in V\) に対して \(v\) へ入っていく \(e \in E\) 全体を \(\rightarrow v\) とし、 \(v\) から出ていく \(e \in E\) 全体を \(\leftarrow v\) とする。
- \(f v = \text{AND}\) なら \(\# (\rightarrow v) = 2\) かつ \(\# (\leftarrow v) = 1\)
- \(f v = \text{OR}\) なら \(\# (\rightarrow v) = 2\) かつ \(\# (\leftarrow v) = 1\)
- \(f v = \text{NOT}\) なら \(\# (\rightarrow v) = 1\) かつ \(\# (\leftarrow v) = 1\)
- \(f v = \text{BR}\) なら \(\# (\rightarrow v) = 1\)
- \(f v = \text{IN} n\) なら \(\# (\rightarrow v) = 0\) かつ \(\# (\leftarrow v) = 1\)
- \(f v = \text{OUT} n\) なら \(\# (\rightarrow v) = 1\) かつ \(\# (\leftarrow v) = 0\)
- どの \(n\) に対しても、 \(f v = \text{IN} n\) となる \(v\) は高々一つ
- どの \(n\) に対しても、 \(f v = \text{OUT} n\) となる \(v\) は高々一つ

論理回路 \((V,E,f)\) に対して \(\text{In}(V,E,f) = \text{Im} f \cap I\) 、 \(\text{Out}(V,E,f) = \text{Im} f \cap O\) とする。

有限な論理回路 \(G\) と \(G_1, \ldots , G_n\) があるとする。
次のものを指定して論理回路を構成する。
- \(G\) 側で \(i\) ごとに In と Out と指定する。
- \(G_i\) 側をひとつ前に接続する In と Out を指定し、一つ後に接続する In と Out を指定する。
これを使って \(G\) を一つ、 \(G_i\) をそれぞれ並べて作った論理回路として論理回路のつなぎ合わせ \(\text{つなぎ}(G, G_1, \ldots, G_n, \text{additional feature})\) を次のように指定する。
// TODO、入出力のラベルが被らないようにすること

admissible な論理回路とは、
つなぎ合わせで作られる論理回路のこととする。
（こうするとちょうどチューリング完全に対応すると思う。
可算な論理回路では大きすぎて、全体の濃度が実数並みになり、チューリングマシンへの符号化がうまくいかない気がする。）
